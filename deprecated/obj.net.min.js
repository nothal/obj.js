function whisper(t){var e=t.method?t.method:"post",n=t.to,s=t.data,o=t.success,a=t.wait,r=t.fail,i=new XMLHttpRequest;return i.open(e,n,!0),"string"==typeof s?i.setRequestHeader("Content-type","application/x-www-form-urlencoded"):"object"==typeof s?(s=encodeURIComponent(JSON.stringify(s)),i.setRequestHeader("Content-type","application/json")):i.setRequestHeader("Content-type","multipart/form-data"),o&&(i.onreadystatechange=function(){4==this.readyState&&200==this.status&&o(this.responseText,this.statusText,this)}),a&&i.addEventListener("loadstart",a),r&&this.addEventListener("error",r),i.send(param),i}Function.prototype.when=function(t,e,n){switch(t=t.toUpperCase()){case"GET":case"POST":break;case"UPLOAD":t="POST";break;default:throw new Error("Method is misspecified (must be either 'get' or 'post'). \nHow to use: callbackFunction.when(method, destination, parametersInJSON)")}var s=new XMLHttpRequest,o=this;return s.open(t,e,!0),"object"==typeof n?(s.setRequestHeader("Content-type","application/json"),n=encodeURIComponent(JSON.stringify(n))):"string"==typeof n?s.setRequestHeader("Content-type","application/x-www-form-urlencoded"):s.setRequestHeader("Content-type","multipart/form-data"),s.onreadystatechange=function(){4==this.readyState&&200==this.status&&o(this.responseText,this.statusText,this)},s.send(n),s},XMLHttpRequest.prototype.then=function(){for(var t=0;t<arguments.length;t++)this.addEventListener("loadend",arguments[t]);return this},XMLHttpRequest.prototype.meanwhile=function(){for(var t=0;t<arguments.length;t++)this.addEventListener("loadstart",arguments[t]);return this},XMLHttpRequest.prototype.incase=function(t,e){return this.addEventListener(t,e),this};