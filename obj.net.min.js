Function.prototype.when=function(e,t,s){switch(e=e.toUpperCase()){case"GET":case"POST":break;case"UPLOAD":e="POST";break;default:throw new Error("Method is misspecified (must be either 'get' or 'post'). \nHow to use: callbackFunction.when(method, destination, parametersInJSON)")}var n=new XMLHttpRequest,o=this;n.open(e,t,!0),"object"==typeof s?(n.setRequestHeader("Content-type","application/json"),s=JSON.stringify(s)):"string"==typeof s?n.setRequestHeader("Content-type","application/x-www-form-urlencoded"):n.setRequestHeader("Content-type","multipart/form-data"),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&o(this.responseText,this.statusText)},n.send(s)};